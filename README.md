# CNU Library AI Agent (BUA)

ì¶©ë‚¨ëŒ€í•™êµ ë„ì„œê´€ AI Agent - Browser Use Agent ê¸°ë°˜ ë¸Œë¼ìš°ì € ìë™í™”

## ğŸ“‹ ê°œìš”

Samsung Researchì˜ "Browser Use Agent ê°œë°œ ì—¬ì •" (ê¹€ê¸°í›ˆ)ì„ ì°¸ê³ í•˜ì—¬ êµ¬í˜„í•œ LLM ê¸°ë°˜ ë¸Œë¼ìš°ì € ìë™í™” ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤.

| í•­ëª© | ì„¤ëª… |
|------|------|
| **ë°©ì‹** | DOM Snapshot + LLM íŒë‹¨ (ReAct íŒ¨í„´) |
| **ë¸Œë¼ìš°ì €** | Playwright (headless=Falseë¡œ ì‹¤í–‰ ê³¼ì • í™•ì¸ ê°€ëŠ¥) |
| **LLM** | Anthropic Claude API |

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
mcp-server/
â”œâ”€â”€ bua/                          # Browser Use Agent ëª¨ë“ˆ
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ snapshot.py               # DOM ìŠ¤ëƒ…ìƒ· ì¶”ì¶œ
â”‚   â”œâ”€â”€ tools.py                  # ë¸Œë¼ìš°ì € ì•¡ì…˜ (click, type, navigate...)
â”‚   â””â”€â”€ agent.py                  # ReAct ë£¨í”„ + LLM íŒë‹¨
â”‚
â”œâ”€â”€ bua_server.py                 # BUA ì„œë²„ (CLI + MCP)
â”œâ”€â”€ book_crawler.py               # ê¸°ì¡´ RPA ë°©ì‹ í¬ë¡¤ëŸ¬
â”œâ”€â”€ server.py                     # ê¸°ì¡´ MCP ì„œë²„ (ì‹œì„¤ ì •ë³´)
â”œâ”€â”€ http_server.py                # HTTP API (í¬ë¡¬ í™•ì¥ ì—°ë™)
â”œâ”€â”€ requirements.txt
â””â”€â”€ claude_desktop_config.json
```

---

## ğŸ”„ ë²„ì „ ë¹„êµ

| êµ¬ë¶„ | book_crawler.py | bua/ |
|------|-----------------|------|
| **ë°©ì‹** | RPA (í•˜ë“œì½”ë”© ì…€ë ‰í„°) | AI Agent (LLM íŒë‹¨) |
| **LLM í•„ìš”** | âŒ | âœ… Anthropic API |
| **ë²”ìš©ì„±** | ì¶©ë‚¨ëŒ€ ë„ì„œê´€ ì „ìš© | ì–´ë–¤ ì‚¬ì´íŠ¸ë“  ê°€ëŠ¥ |
| **ìœ ì§€ë³´ìˆ˜** | ì‚¬ì´íŠ¸ ë³€ê²½ ì‹œ ì½”ë“œ ìˆ˜ì • | í”„ë¡¬í”„íŠ¸ë§Œ ìˆ˜ì • |

---

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. ê°€ìƒí™˜ê²½ ì„¤ì •

```powershell
cd C:\cnu-library-rag-3\mcp-server
python -m venv venv
.\venv\Scripts\Activate
```

### 2. ì˜ì¡´ì„± ì„¤ì¹˜

```powershell
pip install -r requirements.txt
playwright install chromium
```

### 3. API í‚¤ ì„¤ì •

```powershell
$env:ANTHROPIC_API_KEY = "sk-ant-api03-..."
```

### 4. CLI ì‹¤í–‰

```powershell
python bua_server.py
```

---

## ğŸ® CLI ì‚¬ìš©ë²•

```
============================================================
BUA (Browser Use Agent) - CLI Mode
============================================================

Commands:
  1. Agent Run (natural language goal)   # LLM ìë™ íŒë‹¨
  2. Navigate to URL                     # URL ì´ë™
  3. Page Snapshot                       # í˜ì´ì§€ ë¶„ì„
  4. Click Element                       # ìš”ì†Œ í´ë¦­
  5. Type Text                           # í…ìŠ¤íŠ¸ ì…ë ¥
  6. Press Key                           # í‚¤ ì…ë ¥
  s. Save results to JSON                # ê²°ê³¼ ì €ì¥
  q. Quit                                # ì¢…ë£Œ (ìë™ ì €ì¥)

Select>
```

### ì˜ˆì‹œ: ë¡œê·¸ì¸

```
Select> 1
Goal: ì•„ì´ë””ëŠ” 202302554ì´ê³ , ë¹„ë°€ë²ˆí˜¸ëŠ” mypasswordì•¼. ë¡œê·¸ì¸í•´ì¤˜.
Start URL: https://library.cnu.ac.kr/
```

**ì‹¤í–‰ ê³¼ì •:**
```
Step 1: íŒì—… ë‹«ê¸° (a.infoClose í´ë¦­)
Step 2: ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­ (a[href='/login'])
Step 3: í•™ë²ˆ ì…ë ¥ (input#id)
Step 4: ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ (input[name='password'])
Step 5: Enter í‚¤
Step 6: "ë¡œê·¸ì•„ì›ƒ" í…ìŠ¤íŠ¸ í™•ì¸ â†’ done
```

### ì˜ˆì‹œ: ì±… ê²€ìƒ‰

```
Select> 1
Goal: ìë°”ì˜ ì •ì„ ê²€ìƒ‰í•´ì¤˜
Start URL: https://library.cnu.ac.kr/
```

---

## ğŸ”§ Claude Desktop ì—°ë™ (MCP)

`%APPDATA%\Claude\claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "cnu-library-bua": {
      "command": "python",
      "args": ["C:\\cnu-library-rag-3\\mcp-server\\bua_server.py", "--mcp"],
      "env": {
        "ANTHROPIC_API_KEY": "sk-ant-api03-..."
      }
    }
  }
}
```

### BUA MCP Tools

| Tool | ì„¤ëª… |
|------|------|
| `browser_agent_run` | ìì—°ì–´ ëª©í‘œë¡œ ìë™í™” (LLM íŒë‹¨) |
| `browser_navigate` | URL ì´ë™ |
| `browser_snapshot` | í˜ì´ì§€ DOM ë¶„ì„ |
| `browser_click` | ìš”ì†Œ í´ë¦­ |
| `browser_type` | í…ìŠ¤íŠ¸ ì…ë ¥ |
| `browser_screenshot` | ìŠ¤í¬ë¦°ìƒ· ì €ì¥ |

---

## ğŸ¯ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì‚¬ìš©ì                                â”‚
â”‚              "ë¡œê·¸ì¸í•´ì¤˜" / "ìë°”ì˜ ì •ì„ ê²€ìƒ‰í•´ì¤˜"              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    bua_server.py                            â”‚
â”‚                   (CLI / MCP ì„œë²„)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼               â–¼               â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ snapshot.pyâ”‚  â”‚  tools.py  â”‚  â”‚  agent.py  â”‚
   â”‚ DOM ì¶”ì¶œ   â”‚  â”‚ ë¸Œë¼ìš°ì €   â”‚  â”‚ ReAct ë£¨í”„ â”‚
   â”‚            â”‚  â”‚ ì•¡ì…˜       â”‚  â”‚ LLM íŒë‹¨   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚               â”‚               â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼                               â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Playwright â”‚                  â”‚ Anthropic  â”‚
   â”‚ ë¸Œë¼ìš°ì €   â”‚                  â”‚ Claude API â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ReAct ë£¨í”„

```
1. DOM Snapshot ì¶”ì¶œ
   â””â”€ í´ë¦­/ì…ë ¥ ê°€ëŠ¥ ìš”ì†Œ, ì…€ë ‰í„° ì •ë³´
          â”‚
          â–¼
2. LLM Prompt ìƒì„±
   â””â”€ ëª©í‘œ + í˜ì´ì§€ìƒíƒœ + íˆìŠ¤í† ë¦¬ + Site-specific ê·œì¹™
          â”‚
          â–¼
3. LLM ì•¡ì…˜ ê²°ì •
   â””â”€ {"action": "click", "selector": "#login-btn"}
          â”‚
          â–¼
4. Playwright ì‹¤í–‰
   â””â”€ ì‹¤ì œ ë¸Œë¼ìš°ì €ì—ì„œ í´ë¦­/ì…ë ¥
          â”‚
          â–¼
5. ê²°ê³¼ ê´€ì°° â†’ ëª©í‘œ ë‹¬ì„±? â†’ Yes: done / No: 1ë²ˆìœ¼ë¡œ
```

---

## ğŸ“ JSON ê²°ê³¼ ì˜ˆì‹œ

ì¢…ë£Œ ì‹œ ìë™ ì €ì¥: `bua_result_20241230_145530.json`

```json
{
  "session_start": "2024-12-30T14:50:08.123456",
  "session_end": "2024-12-30T14:55:30.654321",
  "actions": [
    {
      "type": "navigate",
      "url": "https://library.cnu.ac.kr",
      "result": {"success": true, "message": "Navigation completed"},
      "timestamp": "2024-12-30T14:50:15.123456"
    },
    {
      "type": "click",
      "selector": "a.infoClose",
      "result": {"success": true, "message": "Click completed"},
      "timestamp": "2024-12-30T14:50:18.123456"
    },
    {
      "type": "type",
      "selector": "#id",
      "text": "202302554",
      "result": {"success": true, "message": "Input completed"},
      "timestamp": "2024-12-30T14:50:25.123456"
    }
  ]
}
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

| í•­ëª© | ì„¤ëª… |
|------|------|
| **API ë¹„ìš©** | ë§¤ Stepë§ˆë‹¤ Anthropic API í˜¸ì¶œ |
| **ì†ë„** | LLM ì‘ë‹µ ëŒ€ê¸°ë¡œ RPAë³´ë‹¤ ëŠë¦¼ |
| **API í‚¤ í•„ìˆ˜** | `browser_agent_run` ì‚¬ìš© ì‹œ í•„ìš” |
| **ë¸Œë¼ìš°ì € í‘œì‹œ** | headless=Falseë¡œ ì‹¤í–‰ ê³¼ì • í™•ì¸ ê°€ëŠ¥ |

---

## ğŸ“‹ êµ¬í˜„ ìƒíƒœ (PDF ê¸°ì¤€)

| ê°œë… | ìƒíƒœ | ì„¤ëª… |
|------|------|------|
| Snapshot (DOM) | âœ… | í…ìŠ¤íŠ¸ ê¸°ë°˜ í˜ì´ì§€ ë¶„ì„ |
| Screenshot (ì´ë¯¸ì§€) | âŒ | Vision ëª¨ë¸ í™œìš© (ë¯¸êµ¬í˜„) |
| í•˜ì´ë¸Œë¦¬ë“œ | âŒ | Snapshot + Screenshot (ë¯¸êµ¬í˜„) |
| ReAct ë£¨í”„ | âœ… | Thought â†’ Action â†’ Observation |
| Reflection | âœ… | ì‹¤íŒ¨ ì‹œ ì›ì¸ ë¶„ì„ |
| Post-summary | âœ… | í˜ì´ì§€ ì „í™˜ ì‹œ ìš”ì•½ |
| Site-specific | âœ… | ì¶©ë‚¨ëŒ€ ë„ì„œê´€ ë¡œê·¸ì¸/ê²€ìƒ‰ í”„ë¡¬í”„íŠ¸ |

---

## ğŸ“‹ TODO

- [ ] Screenshot ë°©ì‹ ì¶”ê°€ (Vision ëª¨ë¸)
- [ ] í•˜ì´ë¸Œë¦¬ë“œ ì „ëµ êµ¬í˜„
- [ ] ë¶„ê´€ëŒ€ì¶œ ì‹ ì²­ ìë™í™”
- [ ] ë„ì„œ ì˜ˆì•½ ìë™í™”

---

## ğŸ› ï¸ ê°œë°œ

```powershell
# ì˜ì¡´ì„± ì„¤ì¹˜
pip install playwright anthropic mcp

# ë¸Œë¼ìš°ì € ì„¤ì¹˜
playwright install chromium

# CLI ì‹¤í–‰
python bua_server.py

# MCP ëª¨ë“œ ì‹¤í–‰
python bua_server.py --mcp
```